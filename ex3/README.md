# Объяснение кода бутрома Hifive Unmatched

Очень душное задание. Вот все, что я смог понять после пары часов всматривания в ассемблер:

Первым делом заполняется `$mtvec` указателем. Передаваемый указатель указывает на джамп в обертку для "c" функции обработчика прерываний (назовем ее `ist`), которая записывает `mcause` в аргумент. После джампа по новому `mtvec` много "нулем" -- возможно задел в линкер скрипте под **vectored mode**.

Далее все харты кроме нулевого в бесконечном цикле ожидают софтварное прерывание. 

Нулевой харт через DMA загружает содержимое rom(`0x0900_0000`) в L2 кэш.
Потом нулевой харт вызывает софтварные прерывания для всех хратов путем записи в `CLINT`. Правда, не могу понять, почему оно записывает "1" вплоть до 0x80 оффсета включительно, хотя до 0x10 было бы достаточно.
Все харты продолжают исполнение из одного и того-же места в коде.

Далее каждый харт сетапит свой стек размером 4 kB.

Потом, как я понимаю, харты начинают работать с переменными, а что обозначает каждый адрес в памяти я не знаю. Еще там начинаются интенсивные джампы, за которыми я не могу уследить 

## Отзыв 

Не совсем понимаю, зачем рассматривать прям ассемблер. Думаю, ели взять посмотреть исходники от этого будет больше пользы, так как там хотя-бы есть комментарии и читаемый код. А так большинство времени уходит на исполнение в голове ассемблера и попытки понять, что вообще происходит, между периодами смотрения в ассемблер. Я конечно понимаю, что умение читать objdump может помочь в нетривиальных задачах, но в этих случаях обычно есть исходный код на си, или хотя-бы человекописный ассемблер с комментариями. Возможно я не понял задания, но как-будто это уж слишком душно.
